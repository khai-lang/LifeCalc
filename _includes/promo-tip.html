<!-- _includes/promo-tip.html -->
<aside class="promo-card mini js-promo" aria-label="오늘의 팁">
  <h3 class="promo-title">오늘의 팁</h3>
  <div class="promo-body">
    <p class="promo-desc">계산기를 더 활용해 보세요.</p>
    <a class="btn-orange promo-cta" href="/">자세히 보기</a>
  </div>
</aside>

<script>
(function(){
  if (!window.PAGE_SECTION){
    var path = location.pathname.replace(/index\.html$/,'');
    var seg = (path.split('/').filter(Boolean)[0]) || 'home';
    window.PAGE_SECTION = seg;
  }
})();

/* 카테고리별 팁 */
const PROMOS_BY_SECTION = {
  home: [
    {desc:"몸무게·운동량 기준으로 하루 권장 수분을 계산해 보세요.", href:"/health/water-intake/", cta:"물 섭취량 계산"},
    {desc:"전세↔월세 전환 계산기로 총비용을 빠르게 비교하세요.", href:"/realestate/rent-to-jeonse/", cta:"전세↔월세 계산"}
  ],
  life: [
    {desc:"D+N, 요일, 윤년/평년까지 한 번에 계산!", href:"/life/date/", cta:"날짜 계산하기"},
    {desc:"법정 만나이·국내식 나이 차이를 즉시 확인하세요.", href:"/life/age/", cta:"만나이 계산"},
    {desc:"출산 예정일과 아이 생후 N일을 간편하게!", href:"/family/due-date/", cta:"출산·육아 계산"}
  ],
  finance: [
    {desc:"대출 원리금·이자를 한눈에 비교하세요.", href:"/finance/loan/", cta:"대출 계산기"},
    {desc:"연봉을 시급으로 환산해 보세요.", href:"/finance/salary-hourly/", cta:"연봉→시급 계산"}
  ],
  realestate: [
    {desc:"전세↔월세 전환율을 바로 계산!", href:"/realestate/rent-to-jeonse/", cta:"전세↔월세"},
    {desc:"부동산 양도세를 손쉽게 추정하세요.", href:"/realestate/capital-gains/", cta:"양도세 계산"}
  ],
  health: [
    {desc:"기초대사량으로 하루 칼로리 소모량 확인", href:"/health/bmr/", cta:"BMR 계산"},
    {desc:"몸무게·활동량으로 적정 섭취량 계산", href:"/health/water-intake/", cta:"물 섭취량 계산"}
  ],
  crypto: [
    {desc:"매수가·매도가 입력하면 코인 수익률 자동 계산!", href:"/crypto/profit/", cta:"코인 수익률"},
    {desc:"분할 매수 평단가와 손익을 확인하세요.", href:"/crypto/dca/", cta:"평단가 계산"}
  ],
  insurance: [
    {desc:"자동차 보험료를 연령·차종별로 추정해 보세요.", href:"/insurance/auto/", cta:"자동차 보험료"},
    {desc:"연금보험 예상 수령액을 계산해 보세요.", href:"/insurance/annuity/", cta:"연금 수령액"}
  ],
  fun: [
    {desc:"15문항으로 멘탈 나이를 확인해 보세요.", href:"/fun/mental-age/", cta:"테스트 시작"},
    {desc:"생일로 별자리와 12간지 띠 보기", href:"/fun/astro/", cta:"확인하기"}
  ],
  guide: [
    {desc:"계산 공식과 해석을 한눈에", href:"/guide/", cta:"가이드 보기"}
  ]
};

/* 랜덤 선택 + 10초 간격 순환 */
(function(){
  const cards = document.querySelectorAll('.js-promo');
  if (!cards.length) return;

  const section = (window.PAGE_SECTION || 'home').toLowerCase();
  const set = PROMOS_BY_SECTION[section] || PROMOS_BY_SECTION.home;
  if (!set || !set.length) return;

  let i = Math.floor(Math.random() * set.length);

  function apply(pick){
    cards.forEach(box=>{
      const descEl = box.querySelector('.promo-desc');
      const ctaEl  = box.querySelector('.promo-cta');
      if (descEl) descEl.textContent = pick.desc;
      if (ctaEl) { ctaEl.textContent = pick.cta; ctaEl.href = pick.href; }
    });
  }

  apply(set[i]);

  setInterval(function(){
    i = (i + 1) % set.length;
    apply(set[i]);
  }, 10000);
})();
</script>
