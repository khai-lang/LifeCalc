<!-- _includes/promo-tip.html -->
<aside class="promo-card mini js-promo" aria-label="오늘의 팁">
  <h3 class="promo-title">오늘의 팁</h3>
  <div class="promo-body">
    <p class="promo-desc">계산기를 더 활용해 보세요.</p>
    <a class="btn-orange promo-cta" href="/">자세히 보기</a>
  </div>
</aside>

<script>
/* 섹션 확보(기본은 default.html에서 주입) – 없으면 경로로 계산 */
(function(){
  if (!window.PAGE_SECTION){
    var path = location.pathname.replace(/index\.html$/,'');
    var seg = (path.split('/').filter(Boolean)[0]) || 'home';
    window.PAGE_SECTION = seg;
  }
})();

/* 카테고리별 팁 */
const PROMOS_BY_SECTION = {
  home: [
    {desc:"몸무게·운동량 기준으로 하루 권장 수분을 계산해 보세요.", href:"/health/water/", cta:"물 섭취량 계산"},
    {desc:"전월세 전환 계산기로 총비용을 빠르게 비교하세요.", href:"/finance/rent-conversion/", cta:"전월세 전환 계산"}
  ],
  life: [
    {desc:"D+N, 요일, 윤년/평년까지 한 번에 계산!", href:"/life/date/", cta:"날짜 계산하기"},
    {desc:"법정 만나이·국내식 나이 차이를 즉시 확인하세요.", href:"/life/age/", cta:"만나이 계산"}
  ],
  finance: [
    {desc:"대출 원리금·이자를 한눈에 비교하세요.", href:"/finance/loan/", cta:"대출 계산기"},
    {desc:"보증금과 이자율로 적정 월세 추산!", href:"/finance/rent-conversion/", cta:"전환 계산"}
  ],
  health: [
    {desc:"기초대사량으로 하루 칼로리 소모량 확인", href:"/health/bmr/", cta:"BMR 계산"},
    {desc:"몸무게·활동량으로 적정 섭취량 계산", href:"/health/water/", cta:"물 섭취량 계산"}
  ],
  family: [
    {desc:"백일·돌 날짜까지 자동 계산", href:"/family/", cta:"출산·육아 계산기"},
    {desc:"예방접종 일정 & 질병청 안내", href:"/family/vaccine/", cta:"예방접종 안내"}
  ],
  fun: [
    {desc:"15문항으로 멘탈 나이를 확인해 보세요.", href:"/fun/mental-age/", cta:"테스트 시작"},
    {desc:"생일로 별자리와 12간지 띠 보기", href:"/fun/astro/", cta:"확인하기"}
  ],
  guide: [
    {desc:"계산 공식과 해석을 한눈에", href:"/guide/", cta:"가이드 보기"}
  ]
};

/* 랜덤 선택 + 10초 간격 순환 */
(function(){
  const cards = document.querySelectorAll('.js-promo');
  if (!cards.length) return;

  const section = (window.PAGE_SECTION || 'home').toLowerCase();
  const set = PROMOS_BY_SECTION[section] || PROMOS_BY_SECTION.home;
  if (!set || !set.length) return;

  let i = Math.floor(Math.random() * set.length);

  function apply(pick){
    cards.forEach(box=>{
      const descEl = box.querySelector('.promo-desc');
      const ctaEl  = box.querySelector('.promo-cta');
      if (descEl) descEl.textContent = pick.desc;
      if (ctaEl) { ctaEl.textContent = pick.cta; ctaEl.href = pick.href; }
    });
  }

  apply(set[i]);

  setInterval(function(){
    i = (i + 1) % set.length;
    apply(set[i]);
  }, 10000);
})();
</script>

