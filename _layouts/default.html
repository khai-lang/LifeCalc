<!doctype html>
<html lang="ko">
<head>
  <!-- Canonical -->
  <link rel="canonical" href="{{ page.url | absolute_url }}"/>

  <!-- ✅ 캐시버스터 추가 -->
  <link rel="stylesheet" href="{{ '/assets/css/main.css?v=20251003' | relative_url }}">

  {% if page.layout == 'guide' or page.section == 'guide' %}
  <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
  {% endif %}

  <!-- Open Graph / Twitter -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="{{ page.title | escape }}">
  <meta property="og:description" content="{{ page.description | escape }}">
  <meta property="og:url" content="{{ page.url | absolute_url }}">
  <meta property="og:site_name" content="생활형 계산기">
  <meta property="og:image" content="https://calculator.khaistory.com/assets/og-default.png">
  <meta name="twitter:card" content="summary_large_image">

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="{{ page.description | default: site.description }}">
  {% seo %}

  <!-- AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3758454239921831" crossorigin="anonymous"></script>

  <script>
    /* 페이지 섹션 값 (guide 카드 회전에 사용) */
    window.PAGE_SECTION = "{{ page.section | default: page.url | split:'/' | slice:1 | first | default:'home' }}";
  </script>

  <style>
    :root{
      --brand:#0b4c74; --brand-ink:#fff; --accent:#ff6a00;
      --text:#222; --muted:#6b7280; --bg:#f5f7fa; --card:#fff; --line:#e6ebf0;
      --max:1100px; --nav-h:72px; --radius:14px;
      --hero-h1:32px; --hero-h2:22px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Noto Sans KR,sans-serif}
    a{color:inherit;text-decoration:none}

    /* 컨테이너 */
    .wrap{max-width:var(--max);margin:0 auto;padding:0 16px}
    main.wrap{padding:24px 16px}

    /* 헤더 */
    header{position:sticky;top:0;z-index:1000;background:var(--brand);color:var(--brand-ink);box-shadow:0 1px 0 rgba(0,0,0,.06)}
    .header-wrap{max-width:var(--max);margin:0 auto;height:var(--nav-h);padding:0 20px;display:flex;align-items:center;gap:16px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:700}
    .brand img{height:28px;width:auto;display:block}

    /* 내비 */
    nav.site-nav{margin-left:36px}
    .nav-ul{list-style:none;margin:0;padding:0;display:flex;align-items:center;gap:18px;flex-wrap:nowrap}
    .nav-ul>li>a,.nav-parent{color:var(--brand-ink);padding:12px 14px;border-radius:10px;background:transparent;border:0;cursor:pointer;font:inherit;white-space:nowrap}
    .nav-ul>li>a:hover,.nav-parent:hover{background:rgba(255,255,255,.12)}
    .drop{position:relative}
    /* ✅ PC 하위 메뉴 연살구톤 */
    .drop .menu{
      position:absolute;left:0;top:calc(100% + 8px);min-width:240px;
      border:1px solid #f3e6db;border-radius:12px;
      box-shadow:0 10px 30px rgba(0,0,0,.08);padding:10px;display:none;z-index:1200;
      background:#fff8f1;
    }
    .drop.open .menu{display:block}
    .menu a{display:block;font-size:16.5px;line-height:1.35;color:#2b2b2b;padding:12px 14px;border-radius:10px;margin:4px 0;border:1px solid #efe2d7;transition:background .2s,border-color .2s,transform .05s}
    .menu a:hover{background:#ffeedd;border-color:#f0d4c0;transform:translateY(-1px)}

    /* 모바일 내비 */
    #nav-toggle{display:none}
    .burger{display:none;color:#fff;font-size:24px;padding:6px 10px;cursor:pointer;margin-left:auto}
    @media (max-width:940px){
      .burger{display:block}
      nav.site-nav{display:none;position:absolute;left:0;right:0;top:var(--nav-h);background:var(--brand);padding:10px 12px;border-bottom:1px solid rgba(255,255,255,.15)}
      #nav-toggle:checked ~ nav.site-nav{display:block}
      .nav-ul{flex-direction:column;align-items:flex-start;gap:6px}
      .drop .menu{position:static;display:none;background:transparent;border:0;box-shadow:none;padding:0;margin-left:8px}
      .drop.open .menu{display:block}
      .menu a{padding:8px 10px;color:#fff;border-color:transparent}
      .menu a:hover{background:rgba(255,255,255,.12)}
    }

    /* 본문/카드/버튼 */
    .card{background:var(--card);border:1px solid var(--line);border-radius:var(--radius);padding:18px}
    label{display:block;margin:10px 0 6px}
    input,select,button:not(.btn){padding:10px;border:1px solid #cfd7df;border-radius:10px;font-size:16px}
    form button:not(.btn){cursor:pointer;background:var(--accent);color:#fff;border:0}
    .note{background:#f7fbff;border:1px solid #dfeeff;border-radius:12px;padding:12px;margin:16px 0}
    h1{font-size:var(--hero-h1);margin:6px 0 18px}
    h2{font-size:var(--hero-h2);margin:20px 0 10px}
    .btn{display:inline-block;padding:6px 14px;border:0;border-radius:6px;background:#ff6a00;color:#fff;font-size:14px;font-weight:bold;cursor:pointer;transition:background .3s}
    .btn:hover{background:#e55d00}
    .result-box{padding:12px;background:#fbd7b6;color:#333;border:1px solid #ffb366;border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,.08);display:none;font-size:15px;line-height:1.6;margin-top:10px}
    .result-box.show{display:block}
    .ad-box{max-width:728px;margin:20px auto}

    /* 3열 레이아웃 (좌측 레일 + 본문 + 우측 레일) */
    /* 왼쪽 레일 고정 */
    .left-rail{position:sticky;top:96px}
    .wrap--with-rail{display:grid;grid-template-columns:minmax(0,1fr) 320px;gap:24px;align-items:start}
    /* ⛳ 본문 중앙 정렬 + 가독폭 */
    .main-content{max-width:880px;margin:0 auto;padding-right:4px}
    @media (max-width:860px){ .main-content{padding:0 10px} }
    /* 오른쪽 레일 고정 */
    .right-rail{position:sticky;top:96px}

    /* 오늘의 팁 카드(연한 베이지) */
    .promo-card{background:#f5e6da;border:1px solid #f3e6db;border-radius:14px;padding:14px 16px;box-shadow:0 8px 24px rgba(0,0,0,.06);margin-bottom:16px}
    .promo-card .btn-orange{display:inline-block;padding:7px 14px;border-radius:8px;background:#f97316;color:#fff !important;font-weight:600;text-decoration:none}
    .promo-card .btn-orange:hover{background:#ea580c}

    /* 반응형: 모바일은 레일 숨김, 본문 하단에 팁 노출 */
    @media (max-width:860px){
      .wrap--with-rail{grid-template-columns:1fr}
      .right-rail{display:none}
      .promo-mobile{display:block;margin-top:14px}
    }
    @media (min-width:861px){
      .promo-mobile{display:none !important}
    }
  </style>
</head>
<body>

  <!-- 헤더 -->
  <header>
    <div class="header-wrap">
      <a class="brand" href="/"><img src="/images/logo.png" alt="LifeCalc 로고"><span>{{ site.title | default: "LifeCalc" }}</span></a>
      <label for="nav-toggle" class="burger" aria-label="메뉴 열기">☰</label>
      <input id="nav-toggle" type="checkbox" aria-label="메뉴 토글">

      <!-- 내비: 하드코딩 삭제 → 단일 include -->
      {% include header.html %}
    </div>
    <script src="/assets/js/lifecalc-ads-v2.js" defer></script>
  </header>

<main class="wrap wrap--with-rail">
  <!-- ✅ 왼쪽 레일: 광고 전용 -->
  <aside class="left-rail">
    <ins class="adsbygoogle" style="display:block"
         data-ad-client="ca-pub-3758454239921831"
         data-ad-slot="YOUR_LEFT_SLOT_ID"
         data-ad-format="rectangle"
         data-full-width-responsive="true"></ins>
    <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script>
  </aside>

  <!-- ✅ 본문: 팁/광고 전부 없음 -->
  <div class="main-content">
    <h1 class="page-title">{{ page.title }}</h1>
    <div class="prose">
      {{ content }}
    </div>
  </div>

  <!-- ✅ 오른쪽 레일: '오늘의 팁' + 광고 (본문이 아니라 여백) -->
  <aside class="right-rail">
    {% include promo-tip-guide.html %}

    <ins class="adsbygoogle" style="display:block; margin-top:16px"
         data-ad-client="ca-pub-3758454239921831"
         data-ad-slot="4868892684"
         data-ad-format="rectangle"
         data-full-width-responsive="true"></ins>
    <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script>
  </aside>
</main>

/* 모바일: 레일 숨김, 팁만 본문 하단 노출 */
@media (max-width:860px){
  .wrap--with-rail{ grid-template-columns:1fr; }
  .left-rail, .right-rail{ display:none; }
  .promo-mobile{ display:block; margin-top:14px; }
}
@media (min-width:861px){
  .promo-mobile{ display:none !important; }
}

    <!-- ✅ 사이드 AdSense 광고 (모든 페이지 공통) -->
    <ins class="adsbygoogle" style="display:block; margin-top:16px"
         data-ad-client="ca-pub-3758454239921831"
         data-ad-slot="4868892684"
         data-ad-format="rectangle"
         data-full-width-responsive="true"></ins>
    <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script>
  </aside>
</main>


  <!-- 푸터 -->
  <footer>
    <div class="foot wrap" style="padding:12px 0;color:var(--muted);display:flex;justify-content:space-between">
      <div>© {{ "now" | date: "%Y" }} LifeCalc · All rights reserved.</div>
    </div>
  </footer>

  <!-- 드롭다운 토글 -->
  <script>
    (function(){
      const drops = document.querySelectorAll('.drop');

      // 초기화: 닫힘 + aria
      drops.forEach(d=>{
        d.classList.remove('open');
        const b=d.querySelector('.nav-parent'); if(b) b.setAttribute('aria-expanded','false');
      });

      drops.forEach(d=>{
        const btn=d.querySelector('.nav-parent');
        if(!btn) return;
        btn.addEventListener('click',(e)=>{
          e.preventDefault();
          drops.forEach(x=>{ if(x!==d){ x.classList.remove('open'); const b=x.querySelector('.nav-parent'); b&&b.setAttribute('aria-expanded','false'); }});
          const open=d.classList.toggle('open');
          btn.setAttribute('aria-expanded', open ? 'true' : 'false');
        });
      });

      document.addEventListener('click',e=>{
        if(!e.target.closest('.drop')){
          drops.forEach(d=>{ d.classList.remove('open'); const b=d.querySelector('.nav-parent'); b&&b.setAttribute('aria-expanded','false'); });
        }
      });
      document.addEventListener('keydown',e=>{
        if(e.key==='Escape'){
          drops.forEach(d=>{ d.classList.remove('open'); const b=d.querySelector('.nav-parent'); b&&b.setAttribute('aria-expanded','false'); });
        }
      });
    })();
  </script>

  {% include calc-common.html %}

  <script>
  (function(){
    "use strict";
    function clean(v){ return String(v==null?"":v).replace(/[^\d.-]/g,""); }
    function fmt(el, isFloat){
      var v = clean(el.value);
      if(!v){ el.value=""; return; }
      if(!isFloat) v = v.replace(/\./g,"");
      var n = isFloat ? parseFloat(v) : parseInt(v,10);
      el.value = isFinite(n) ? n.toLocaleString("ko-KR") : "";
    }
    document.addEventListener("input", function(e){
      var t=e.target; if(!t||!t.dataset) return;
      if(t.dataset.format==="currency") fmt(t,false);
      if(t.dataset.format==="number")   fmt(t,true);
    }, {passive:true});
    document.addEventListener("blur", function(e){
      var t=e.target; if(!t||!t.dataset||!t.dataset.format) return;
      fmt(t, t.dataset.format==="number");
    }, true);
  })();
  </script>

</body>
</html>
